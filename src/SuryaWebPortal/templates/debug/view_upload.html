
{% extends "debug/debug.html" %}


{% block content %}

<h2 style="margin-bottom:0;">View Upload</h2>
<div class="breadcrumbs">
<a href="{% url SuryaWebPortal.views.debug.debug.deployments %}">Deployments</a>
&nbsp;&raquo;&nbsp;
<a href="{% url SuryaWebPortal.views.debug.debug.view_deployment dep_id %}">View Deployment: {{ dep_id }}</a>
&nbsp;&raquo;&nbsp;
View Upload
</div>
<br />

<h3>Upload Data</h3>
<ul>
<li>Device ID: {{ up.deviceId }}
<li>Deployment: {{ up.deploymentId }}
<li>Server Time: {{ up.serverDatetime }}
<li>Capture Time: {{ up.recordDatetime }}
<li><a href="{% url SuryaWebPortal.views.files.uploadfile up.id %}">{{ up.filename }}</a>
<li>Data Type: {{ up.datatype }}
<li>GPS: {{ up.gpsLatLong }}, Alt: {{ up.gpsAltitude }}
</ul>

<ul>
<li>Version: {{ up.version }}
<li>AuxID: {{ up.auxId }}
<li>Tag: {{ up.tag }}
<li>Misc: {{ up.misc }}
<li>Valid: {{ up.validFlag }}
<li>Invalid Reason: {{ up.invalidReason }}
</ul>

{% if up.processing_success %}
<h3>Processing Results</h3>
{% else %}
<h3>Processing Results (FAILED)</h3>
{% endif %}
<ul>
<li><a href="{% url SuryaWebPortal.views.files.uploadfile result.item.id %}">Click for original image</a>
<li>Upload time: {{ result.item.serverDatetime }}
<li>Capture time: {{ result.item.recordDatetime }}
</ul>

<ul>
<li>BC Loading: {{ result.computationResult.result.BCAreaRed|floatformat:3  }} ug/cm^2
<li>BC Concentration: {{ result.computationResult.result.BCVolRed|floatformat:3  }} ug/m^3
</ul>

<ul>
<li>Exposure Time: {{ result.computationConfiguration.exposedTime }} {{ result.computationConfiguration.timeUnits }} 
{% if result.computationConfiguration.airFlowRate < 20 %}
<li>Air Flow Rate: {{ result.computationConfiguration.airFlowRate }} l/p
{% else %}
<li>Air Flow Rate: {{ result.computationConfiguration.airFlowRate }} cc/m
{% endif %}
<li>Filter Radius: {{ result.computationConfiguration.filterRadius }} cm
</ul>

{% if up.processing_success %}
<h3>Debug Image</h3>
<img src="{% url SuryaWebPortal.views.files.debugfile result.id %}" alt="Results Chart">
<h3>Results Chart</h3>
<img src="{% url SuryaWebPortal.views.files.chartfile result.id %}" alt="Debug Image">
{% endif %}

{% endblock %}
